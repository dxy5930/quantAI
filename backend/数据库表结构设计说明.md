# 股票数据库表结构设计说明

## 📊 数据库概览

本股票量化交易系统包含19个数据表，涵盖股票数据、用户管理、策略回测、技术分析等完整功能。核心表通过`symbol`字段(股票代码)进行关联。

## 🗃️ 表结构详细说明

### 1. stock_info - 股票基本信息表 ⭐ 主表

**表说明**: 股票基本信息表：存储A股所有股票的基础信息，包括代码、名称、市值、板块等核心数据。这是系统的主表，其他表通过symbol字段关联。

**主要字段**:
- `symbol` - 股票代码 (如000001、600000等，唯一标识)
- `name` - 股票名称 (如平安银行、浦发银行等)
- `sector` - 所属板块 (主板、创业板、科创板、中小板)
- `market` - 交易市场 (SH=上海证券交易所，SZ=深圳证券交易所)
- `marketCap` - 总市值(元) (股价×总股本，衡量公司规模)
- `peRatio` - 市盈率PE (股价/每股收益，衡量估值水平)
- `pbRatio` - 市净率PB (股价/每股净资产，衡量投资价值)

**用途**: 
- 股票基础信息查询
- 市场分析和统计
- 其他表的关联主表

---

### 2. stock_data - 股票日线交易数据表 📈

**表说明**: 股票日线交易数据表：存储每只股票每个交易日的OHLC数据、成交量、涨跌幅等交易信息。用于技术分析和历史数据查询。

**主要字段**:
- `symbol` - 股票代码 (关联stock_info表)
- `date` - 交易日期 (格式YYYY-MM-DD)
- `open` - 开盘价 (当日第一笔交易价格)
- `high` - 最高价 (当日交易的最高价格)
- `low` - 最低价 (当日交易的最低价格)
- `close` - 收盘价 (当日最后一笔交易价格)
- `volume` - 成交量 (当日交易的股票数量)
- `changePercent` - 涨跌幅(%) (相对前一交易日的涨跌百分比)

**用途**:
- K线图绘制
- 技术指标计算
- 历史价格查询
- 趋势分析

---

### 3. stock_f10 - 股票F10基本信息表 🏢

**表说明**: 股票F10基本信息表：存储上市公司的详细资料，包括公司概况、管理层信息、联系方式、股本结构等。相当于公司的身份证。

**主要字段**:
- `symbol` - 股票代码 (关联stock_info表)
- `fullName` - 公司全称 (完整的法定名称)
- `legalRepresentative` - 法定代表人 (公司法人代表姓名)
- `registeredAddress` - 注册地址 (公司法定注册地址)
- `officeAddress` - 办公地址 (公司实际办公地址)
- `mainBusiness` - 主营业务 (公司主要经营业务)
- `establishDate` - 成立日期 (公司注册成立日期)
- `listingDate` - 上市日期 (股票首次公开发行日期)

**用途**:
- 公司基本信息查询
- 投资者关系管理
- 公司背景调研
- 合规信息展示

---

### 4. stock_financial - 股票财务数据表 💰

**表说明**: 股票财务数据表：存储上市公司的财务报表数据，包括资产负债表、利润表、现金流量表和财务比率指标。用于基本面分析。

**主要字段**:

**报告信息**:
- `symbol` - 股票代码 (关联stock_info表)
- `reportDate` - 报告期 (财务报告的截止日期)
- `reportType` - 报告类型 (annual=年报，semi-annual=中报，quarterly=季报)

**资产负债表**:
- `totalAssets` - 总资产(元) (公司拥有的全部资产)
- `totalLiabilities` - 总负债(元) (公司承担的全部债务)
- `shareholdersEquity` - 股东权益(元) (归属股东的净资产)

**利润表**:
- `revenue` - 营业收入(元) (主营业务收入)
- `netProfit` - 净利润(元) (税后利润)
- `basicEPS` - 基本每股收益(元) (净利润/总股本)

**财务比率**:
- `roe` - 净资产收益率ROE(%) (净利润/股东权益×100%，衡量盈利能力)
- `roa` - 总资产收益率ROA(%) (净利润/总资产×100%，衡量资产使用效率)

**用途**:
- 基本面分析
- 财务健康度评估
- 投资价值判断
- 财务比率计算

---

### 5. stock_dividend - 股票分红配股表 🎁

**表说明**: 股票分红配股表：存储上市公司的历史分红配股记录，包括现金分红、送股、转增股等信息。用于分析公司分红政策。

**主要字段**:
- `symbol` - 股票代码 (关联stock_info表)
- `recordDate` - 股权登记日 (确定分红股东名单的日期)
- `exDividendDate` - 除权除息日 (股价调整日期)
- `paymentDate` - 派息日 (实际发放分红的日期)
- `cashDividendPerShare` - 每股派息(元) (每股现金分红金额)
- `stockDividendPerShare` - 每股送股(股) (每股获得的免费股票数量)
- `dividendYield` - 股息率(%) (分红/股价×100%，衡量分红收益率)
- `dividendPlan` - 分红方案 (具体的分红配股方案描述)

**用途**:
- 分红历史查询
- 股息率计算
- 分红政策分析
- 投资收益评估

## 🔗 表关系图

```
stock_info (主表)
    ↓ symbol
    ├── stock_data (1:N) - 每日交易数据
    ├── stock_f10 (1:1) - 公司详细信息  
    ├── stock_financial (1:N) - 财务报表数据
    └── stock_dividend (1:N) - 分红配股记录
```

## 📈 数据统计 (当前)

```
💾 数据库统计:
📋 活跃股票: 100只
📈 交易数据: 100条
🏢 F10信息: 100条
💰 财务数据: 300条 (3年数据)
🎁 分红数据: 183条
```

## 🔍 常用查询示例

### 1. 获取股票基本信息
```sql
SELECT symbol, name, sector, market, marketCap, peRatio 
FROM stock_info 
WHERE isActive = 1 
ORDER BY marketCap DESC;
```

### 2. 获取股票最新交易数据
```sql
SELECT si.symbol, si.name, sd.close, sd.changePercent, sd.volume
FROM stock_info si
JOIN stock_data sd ON si.symbol = sd.symbol
WHERE sd.date = CURDATE()
ORDER BY sd.changePercent DESC;
```

### 3. 获取股票财务概况
```sql
SELECT sf.symbol, sf.revenue, sf.netProfit, sf.roe, sf.reportDate
FROM stock_financial sf
WHERE sf.reportType = 'annual'
AND sf.reportDate >= '2022-01-01'
ORDER BY sf.roe DESC;
```

### 4. 获取高分红股票
```sql
SELECT sd.symbol, si.name, sd.cashDividendPerShare, sd.dividendYield
FROM stock_dividend sd
JOIN stock_info si ON sd.symbol = si.symbol
WHERE sd.dividendYield > 3.0
ORDER BY sd.dividendYield DESC;
```

## 🛠️ 维护建议

### 数据更新频率
- **stock_info**: 每日更新 (市值、PE/PB等)
- **stock_data**: 每日更新 (交易数据)
- **stock_f10**: 季度更新 (公司信息变化较少)
- **stock_financial**: 季度更新 (财报发布后)
- **stock_dividend**: 年度更新 (分红公告后)

### 索引优化
- 所有表的`symbol`字段都有索引
- `stock_data`表的`date`字段有索引
- `stock_financial`表的`reportDate`字段有索引
- 复合索引: `(symbol, date)`, `(symbol, reportDate)`

### 数据清理
- 定期清理超过5年的交易数据
- 保留所有财务数据和分红记录
- 及时更新退市股票的`isActive`状态

---

**文档版本**: v1.0  
**最后更新**: 2025年7月16日  
**维护团队**: ChaoGu Development Team

💡 **提示**: 现在你可以在任何数据库管理工具中看到每个表的详细说明和字段注释了！