# 数据库表注释修复说明

## 问题描述
数据库中的表注释和字段注释出现乱码，需要修复为正确的中文注释。

## 解决方案
提供了两种修复方式：

### 方式一：直接执行SQL脚本
```bash
mysql -u用户名 -p密码 数据库名 < src/migrations/021-fix-table-comments.sql
```

### 方式二：使用Node.js脚本（推荐）
1. 确保已安装mysql2依赖：
   ```bash
   npm install mysql2
   ```

2. 设置环境变量或修改脚本中的数据库配置

3. 运行修复脚本：
   ```bash
   # Linux/Mac
   node scripts/fix-table-comments.js
   
   # Windows
   scripts/fix-comments.bat
   ```

## 修复内容

### node_types 表
- **表注释**: 节点类型表-定义AI工作流中各种节点的类型信息
- **字段注释**:
  - id: 主键ID
  - type: 节点类型标识符，唯一值，如data_source、filter、analysis等
  - name: 节点类型显示名称
  - description: 节点类型描述信息
  - icon: 节点图标标识符
  - color: 节点颜色标识符
  - created_at: 创建时间
  - updated_at: 更新时间

### node_config_fields 表
- **表注释**: 节点配置字段表-定义各节点类型的配置字段信息
- **字段注释**:
  - id: 主键ID
  - node_type: 关联的节点类型标识符
  - field_key: 字段键名，用于表单提交和数据存储
  - field_name: 字段显示名称
  - field_type: 字段类型（text-文本框，number-数字输入，select-单选下拉，multiselect-多选下拉，boolean-布尔开关，range-范围选择）
  - is_required: 是否必填字段
  - default_value: 默认值
  - placeholder: 输入框占位符文本
  - description: 字段描述和帮助信息
  - sort_order: 排序顺序，数值越小越靠前
  - created_at: 创建时间
  - updated_at: 更新时间

### node_config_options 表
- **表注释**: 节点配置选项表-定义select和multiselect类型字段的可选项
- **字段注释**:
  - id: 主键ID
  - config_field_id: 关联的配置字段ID
  - option_value: 选项值，用于表单提交和数据存储
  - option_label: 选项显示标签
  - option_description: 选项描述信息
  - sort_order: 排序顺序，数值越小越靠前
  - is_active: 是否启用此选项
  - created_at: 创建时间
  - updated_at: 更新时间

## 验证修复结果
脚本执行后会自动显示修复后的表注释，也可以手动查询：

```sql
SELECT TABLE_NAME, TABLE_COMMENT 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_SCHEMA = '数据库名' 
AND TABLE_NAME IN ('node_types', 'node_config_fields', 'node_config_options');
```

## 注意事项
- 执行前请备份数据库
- 确保数据库连接配置正确
- 脚本会自动设置UTF8MB4字符集 